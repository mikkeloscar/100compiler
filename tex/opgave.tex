\documentclass[12pt]{article}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[danish]{babel}
\usepackage{cite}
% \usepackage[danish=guillemets]{csquotes}
%\defineshorthand{"`}{\openautoquote}
%\defineshorthand{"'}{\closeautoquote}

% \usepackage[footnotesize,margin=1cm]{caption}
% \usepackage{mathpazo}
% \usepackage{enumitem}
% \usepackage{booktabs}
\usepackage{enumerate}
\usepackage{fullpage}
\usepackage[pdftex,bookmarks=true]{hyperref}
\hypersetup{
    colorlinks,%
    citecolor=black,%
    filecolor=black,%
    linkcolor=black,%
    urlcolor=black
}
\usepackage{color}
\usepackage{minted}
% \usemintedstyle{trac}
\definecolor{bg}{rgb}{0.95,0.95,0.95}

% \frenchspacing

\begin{document}

% titel
\author{Mikkel Oscar Lyderik Larsen \\ Aske Mottelson Clausen}
\title{Oversættere \\ G-opgave}
\maketitle

\thispagestyle{empty}
\newpage


%\begin{minted}[bgcolor=bg]{sml}
%fun x = []
%  | x::s = [x]
%\end{minted}

\tableofcontents

\section*{Indledning}
Denne rapport er en del af godkendelsesopgaven til kurset Oversættere på Datalogisk Institut, ved Københavns Universitet 2011. Opgaven beskriver hvordan gruppen har implementeret en oversætter til programmingssproget \texttt{100}. Oversætteren er skrevet i \texttt{SML}, og væsentligste overvejselser gruppen har gjort sig, samt programuddrag medtages i denne rapport. Rapporten skal læses sideløbende med selve oversætteren der er afleveret sammen med rapporten i en \texttt{zip} fil.

\section{Lexer}
Leksikalsk analyse er fortolkningen af en givent tekst input, til \texttt{tokens}. Lexeren, der foretager den leksikalske analyse består af en række regler af regulære udtryk der afgør hvad token skal forstås som. Lexeren består foruden de regulære udtryk af en liste af nøgleord, der altid ser ens ud. Vi har til denne liste tilføjet nøgleordet \textit{while}, da denne ikke var at finde i det oprindelige skelet. Regelsættet er at finde i \texttt{Lexer.lex}\\
Foruden at have tilføjet simple regulære udtryk til at matche \texttt{*}, \texttt{[}, \texttt{]}, \texttt{\{}, \texttt{\}} og \texttt{==} - har vi tilføjet to regulære udtryk til at matche String og Char. Det regulære udtryk, samt fjernelsen af de to anførselstegn rundt om Stringen udgør vores leksikalske analyse af string (ligeledes for char), og er implementeret således:\\

\begin{minted}[bgcolor=bg]{sml}
 | `"` ([^`\` `"` `'`] | `\` ([^`a`] | `a`))+ `"`
       { case String.fromCString(String.substring(getLexeme lexbuf,
              1,size(getLexeme lexbuf)-2)) of
         NONE => lexerError lexbuf "Bad String"
       | SOME s => Parser.CSTRING (s, getPos lexbuf) }
\end{minted}	 
    
En char eller string kan indeholde hhv. et eller flere tegn med ASCII kode mellem 32 og 126 undtagen tegnene ’, " og \. Dette er lavet ved at definere en sekvens af alle tegn undtagen disse, eller en sekvens indeholdende alle tegn (er lavet ved en sekvens af alt undtagen 'a', eller 'a'), med et escape tegn foran. For char skal der være én af disse, og for string en eller flere.
    
    
\section{Parser}
For at forbinde de tokens der er fortolket af Lexeren bruges en Parser. Denne syntaxanalyserer, og terminerer oversættelsen af et 100-program, hvis der findes syntax-fejl. I \texttt{Parser.grm} findes grammatikken for sproget, og de manglende elementer fra det udleverede skelet er implementeret. Stats fra grammatikken er lavet ved at kombinere Stat til en liste, og er implementeret således:\\

\begin{minted}[bgcolor=bg]{sml}
Stats :                 { [] }
      | Stat Stats      { $1 :: $2 }
\end{minted}

Vi har derudover ændret navnet fra \texttt{S100.Lookup} til \texttt{S100.Index}, for at undgå forvirring af lookup i symboltabel. Stats bruges i \texttt{S100.Block} da denne indeholder en stat list:\\

\begin{minted}[bgcolor=bg]{sml}
Lval : ...

     | LBRACKET Decs1 Stats RBRACKET
                        { S100.Block ($2,$3,$1) }
\end{minted}

Der er også implementeret \texttt{REF ID} til \texttt{Sid}, og til \texttt{Lval} er der tilføjet \texttt{ID REF} og \texttt{ID LSBRACKET Exp RSBRACKET}, sidstnævnte til at passe med et index-check af en pointer, eksempeltvis \texttt{a[2]}.

\section{Type}



\bibliography{litteratur}{}
\bibliographystyle{plain}
\end{document}
